# ============================
# Main tmux Configuration file
# ============================

# ------------------------------------------------------------
# Basic setup

# Remap prefix, act like GNU screen
unbind C-b
set -g prefix C-a

# Changing the Default Delay
set -sg escape-time 1

# Setting the Window and Panes Index
set -g base-index 1
setw -g pane-base-index 1

# ------------------------------------------------------------
# Customizing Keys, Commands, and User Input

# Creating a Shortcut to Reload the Configuration
bind r source-file ~/.tmux.conf \; display "tmux config reloaded!"

# Sending the Prefix to Other Applications
bind C-a send-prefix

# Splitting Panes
bind | split-window -h
bind - split-window -v

# Remapping Movement Keys, act like Vim
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Resizing Panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Changing repeat limit
set -g repeat-time 1000

# Handling the Mouse
set -g mode-mouse on
setw -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on

# Renumber windows sequentially after closing any of them
set -g renumber-windows on

# Increase scrollback lines
set -g history-limit 10000

# ------------------------------------------------------------
# Customizing the Status Bar

# Enabling UTF-8
set -g status-utf8 on

# Configuring Status Bar Items
set -g status-left-length 40
set -g status-left " #[fg=colour234]#S #[fg=red]#I #[fg=blue]#P"

set -g status-right "#{prefix_highlight} #{online_status} #[fg=colour234,bg=white,nobold,nounderscore,noitalics]#[fg=colour250,bg=colour234] #{battery_icon}#{battery_percentage}#{battery_remain}  %a#[fg=colour247,bg=colour234]#[fg=colour247,bg=colour234] %a %h-%d %H:%M #[fg=colour252,bg=colour234,nobold,nounderscore,noitalics]#[fg=red,bg=colour234]#[fg=white,bg=red] #H "

# Keeping Status Bar Info Up to Date
set -g status-interval 60

# Centering the Window List
set -g status-justify centre

# Identifying Activity in Other Windows
setw -g monitor-activity on
set -g visual-activity on

# Remove administrative debris (session name, hostname, time) in status bar
# set -g status-left ''
# set -g status-right ''

# ------------------------------------------------------------
# Configuring Colors

# Color reference
# Light Blue = 31
# Dark Grey  = 234
# Light Grey = 240
# White      = 254

# Improve colors
set -g default-terminal "screen-256color"

# soften status bar color from harsh green to light gray
# set -g status-bg "#ffffff"
# set -g status-fg "#999999"

# ------------------------------------------------------------
# Working With Text and Buffers

# Copying and Pasting Text
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection

# Working with the Clipboard on Linux
bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"

# ------------------------------------------------------------
# Extra config

# Local config
if-shell "[ -f ~/.tmux.conf.local ]" "source ~/.tmux.conf.local"
if-shell "[ -f ~/.tmux.conf.tpm ]" "source ~/.tmux.conf.tpm"

# ===================
# Tmux Plugin Manager
# ===================

set -g status-bg "#ffffff"
set -g status-fg "#999999"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'tmux-plugins/tmux-net-speed'
set -g @plugin 'tmux-plugins/tmux-online-status'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-urlview'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'jbnicolai/tmux-fpp'

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'git@github.com/user/plugin'
# set -g @plugin 'git@bitbucket.com/user/plugin'

# Initialize Tmux plugin manager
# (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# ---------------
# Plugin settings

# Resizing pane
set-option -g @pane_resize "1"

# Restoring vim and neovim sessions
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'

# Restoring pane contents
set -g @resurrect-capture-pane-contents 'on'

